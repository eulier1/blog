(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{262:function(e,n,t){e.exports=t.p+"assets/img/img1.ecfede03.png"},263:function(e,n){e.exports="data:image/png;base64,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"},264:function(e,n,t){e.exports=t.p+"assets/img/img3.4437c594.png"},265:function(e,n,t){e.exports=t.p+"assets/img/upload.13c24cf5.gif"},281:function(e,n,t){"use strict";t.r(n);var a=t(28),r=Object(a.a)({},(function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"upload-image-to-storage-firebase-using-nuxt-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upload-image-to-storage-firebase-using-nuxt-js"}},[e._v("#")]),e._v(" Upload Image to Storage Firebase using Nuxt.js")]),e._v(" "),a("p",[e._v("Working with Firebase is an awesome experience, such platform provide almost everything you need to create web & mobile apps.")]),e._v(" "),a("p",[e._v("Today we're going to integrate firebase with Nuxt by made a single example.")]),e._v(" "),a("p",[e._v("Considerations")]),e._v(" "),a("ul",[a("li",[e._v("I'm gonna focus in the logic rather than UI for simplicity")]),e._v(" "),a("li",[e._v("Demo for Linux OS Ubuntu distro. (I work with ElementaryOS)")])]),e._v(" "),a("h2",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("ul",[a("li",[e._v("Install Node.js using "),a("a",{attrs:{href:"https://github.com/creationix/nvm",target:"_blank",rel:"noopener noreferrer"}},[e._v("nvm"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Install "),a("a",{attrs:{href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git",target:"_blank",rel:"noopener noreferrer"}},[e._v("Git"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Install "),a("a",{attrs:{href:"https://yarnpkg.com/en/docs/install#debian-stable",target:"_blank",rel:"noopener noreferrer"}},[e._v("yarn"),a("OutboundLink")],1),e._v(" (optional but very helpful)")]),e._v(" "),a("li",[e._v("Install "),a("a",{attrs:{href:"https://nuxtjs.org/guide/installation",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nuxt.js"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"_1-create-firebase-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-create-firebase-project"}},[e._v("#")]),e._v(" 1. Create Firebase Project")]),e._v(" "),a("p",[e._v("Go to "),a("a",{attrs:{href:"https://console.firebase.google.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Firebase"),a("OutboundLink")],1),e._v(" login and create a new project.")]),e._v(" "),a("p",[e._v("So what we need right now is a configuration info from project by going to "),a("strong",[e._v("Project Overview")]),e._v(" and click in "),a("strong",[e._v("Project Configuration")])]),e._v(" "),a("p",[a("img",{attrs:{src:t(262),alt:"firebase-project"}})]),e._v(" "),a("p",[e._v("Go below and click in "),a("strong",[e._v("</>")]),e._v(" icon, which means it's for web development.")]),e._v(" "),a("p",[a("img",{attrs:{src:t(263),alt:"firebase-project"}})]),e._v(" "),a("p",[e._v("Copy & Paste")]),e._v(" "),a("p",[a("img",{attrs:{src:t(264),alt:"firebase-project"}})]),e._v(" "),a("p",[e._v("Before we go to Nuxt, click in "),a("strong",[e._v("Storage")]),e._v(" from sidebar, go to "),a("strong",[e._v("Rules")]),e._v(" in the tabs, and set like this.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("service firebase.storage {\n  match /b/{bucket}/o {\n    match /{allPaths=**} {\n      allow read, write\n    }\n  }\n}\n")])])]),a("p",[e._v("This will allow us to do all Storage Operations, like download, upload & search (this rules are for demo purpose, or dev enviroments, "),a("strong",[e._v("Remember")]),e._v(" to create the appropiates rules for your app)")]),e._v(" "),a("h2",{attrs:{id:"_2-create-the-nuxt-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-create-the-nuxt-project"}},[e._v("#")]),e._v(" 2. Create the Nuxt Project")]),e._v(" "),a("p",[e._v("I'm gonna create the project using yarn with the name "),a("strong",[e._v("groovy-project")]),e._v(" and install later, "),a("strong",[e._v("bootstrap")]),e._v(" & "),a("strong",[e._v("firebase")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yarn create nuxt-app groovy-project\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("yarn add firebase\n")])])]),a("p",[e._v("Once it downloaded. I'm gonna create a plugin (which means in the context of Nuxt.js, create a Javascript file), named "),a("code",[e._v("fb-init")]),e._v(" that contains this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('import firebase from "firebase/app";\nimport "firebase/auth";\n\nvar config = {\n  apiKey: process.env.FIREBASE_API_KEY,\n  authDomain: process.env.FIREBASE_AUTHDOMAIN,\n  databaseURL: process.env.FIREBASE_DATABASE_ENDPOINT,\n  projectId: process.env.FIREBASE_PROJECTID,\n  storageBucket: process.env.FIREBASE_STORAGEBUCKET,\n  messagingSenderId: process.env.FIREBASE_MESSAGINGSENDERID\n};\nexport default (!firebase.apps.length\n  ? firebase.initializeApp(config)\n  : firebase.app());\n')])])]),a("p",[e._v("Import such file in the "),a("code",[e._v("nuxt.config.js")]),e._v(" in plugins section.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('plugins: ["~plugins/firebase-auth-rest.js"]\n')])])]),a("h2",{attrs:{id:"_3-create-vue-component-to-upload-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-create-vue-component-to-upload-file"}},[e._v("#")]),e._v(" 3. Create Vue Component to Upload File")]),e._v(" "),a("p",[e._v("create a vue component "),a("strong",[e._v("app-uploadfile.vue")]),e._v(", like this.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<template>\n  <section>\n    <div v-if="isUploading" class="p-3">\n      <div class="progress">\n        <div\n          class="progress-bar"\n          role="progressbar"\n          :style="{\'width\': progress + \'%\'}"\n          :aria-valuenow="progress"\n          aria-valuemin="0"\n          aria-valuemax="100"\n        >{{progress}}%</div>\n      </div>\n    </div>\n    <div style="display: flex; align-items: center; justify-content: space-around;">\n      <div>\n        <img :src="placeholderImg" alt="..." class="img-thumbnail" width="90px" height="90px">\n      </div>\n      <div>\n        <div class="custom-file">\n          <input\n            @change="imagePreview($event.target.files[0])"\n            type="file"\n            class="custom-file-input"\n            id="customFileUpload"\n            lang="es"\n          >\n          <label class="custom-file-label" for="customFileLang">Seleccionar Archivo</label>\n        </div>\n      </div>\n      <div>\n        <button\n          v-if="!isUploading"\n          :disabled="!isImageLoaded"\n          :class="{\'btn-primary\': isImageLoaded, \'btn-disabled\': !isImageLoaded}"\n          @click="uploadImage(imageFile)"\n          type="button"\n          class="btn"\n        >Subir</button>\n      </div>\n    </div>\n    <div class="p-2">\n      <div v-if="downloadURL" class="alert alert-dark" role="alert">{{downloadURL}}</div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport * as firebase from "firebase";\n\nexport default {\n  data() {\n    return {\n      placeholderImg: "/placeholder300x300.png",\n      imageFile: "",\n      isUploading: false,\n      isImageLoaded: false,\n      progress: 0,\n      downloadURL: null\n    };\n  },\n  methods: {\n    imagePreview: function(file) {\n      self = this;\n      this.isImageLoaded = false;\n\n      console.log("imagePreview");\n      let reader = new FileReader();\n\n      reader.onloadend = function() {\n        self.placeholderImg = reader.result;\n        console.log(this.placeholderImg);\n      };\n\n      if (file) {\n        reader.readAsDataURL(file);\n      } else {\n        this.placeholderImg = "/placeholder300x300.png";\n      }\n\n      this.imageFile = file;\n      this.isImageLoaded = true;\n    },\n    uploadImage: function(file) {\n      console.log(file);\n      self = this;\n      this.isUploading = true;\n\n      let metadata = {\n        contentType: "image/jpeg"\n      };\n\n      let uploadTask = firebase\n        .storage()\n        .ref()\n        .child("images/" + file.name)\n        .put(file, metadata);\n\n      uploadTask.on(\n        firebase.storage.TaskEvent.STATE_CHANGED,\n        function(snapshot) {\n          let progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n          self.progress = progress.toFixed(0);\n          console.log("self.progress", self.progress);\n          console.log("Upload is " + progress + "% done");\n        },\n        function(error) {\n          // A full list of error codes is available at\n          // https://firebase.google.com/docs/storage/web/handle-errors\n          switch (error.code) {\n            case "storage/unauthorized":\n              // User doesn\'t have permission to access the object\n              console.log("storage/unauthorized");\n              break;\n\n            case "storage/canceled":\n              // User canceled the upload\n              console.log("storage/canceled");\n              break;\n\n            case "storage/unknown":\n              // Unknown error occurred, inspect error.serverResponse\n              console.log("storage/unknown");\n              break;\n          }\n        },\n        function() {\n          setTimeout(() => {\n            self.isUploading = false;\n          }, 350);\n          uploadTask.snapshot.ref.getDownloadURL().then(function(downloadURL) {\n            console.log("File available at", downloadURL);\n            self.downloadURL = downloadURL;\n            self.$emit("downloadURL", downloadURL);\n          });\n        }\n      );\n    }\n  }\n};\n<\/script>\n')])])]),a("p",[a("img",{attrs:{src:t(265),alt:"imageupload"}})]),e._v(" "),a("p",[e._v("Import your component in "),a("code",[e._v("/pages/index.vue")]),e._v(", and check in your console, when you upload a file.")]),e._v(" "),a("p",[e._v("You will see:")]),e._v(" "),a("ul",[a("li",[e._v("current uploading")]),e._v(" "),a("li",[e._v("and when it's complete")])]),e._v(" "),a("p",[e._v("Now check in your Firebase project, Storage section. You'll see you image uploaded.")]),e._v(" "),a("p",[e._v("For a deeper comprehension")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://firebase.google.com/docs/storage/web/start?hl=es-419",target:"_blank",rel:"noopener noreferrer"}},[e._v("Firebase Storage Start"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://firebase.google.com/docs/storage/web/create-reference?hl=es-419",target:"_blank",rel:"noopener noreferrer"}},[e._v("Firebase Storage Reference"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://firebase.google.com/docs/storage/web/upload-files?hl=es-419",target:"_blank",rel:"noopener noreferrer"}},[e._v("Firebase Upload Files"),a("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=r.exports}}]);